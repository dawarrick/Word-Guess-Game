<!DOCTYPE html>
<html>

<body>
  <!--this is the part where you replace text-->
  <div>
    <p id="directions-text">Press any key to start playing!</p>
    <p id="userchoice-text"></p>
    <h1 id="currentword-text"></h1>
    <p id="guessed-text"></p>
    <p id="wins-text"></p>
    <p id="losses-text"></p>
    <h1 id="gameStatus-text"></h1>
  </div>

  <!--this is the part where you replace text
<p>A function is triggered when the user releases a key in the input field. The function transforms the character to upper case.</p>
Enter your name: <input type="text" id="fname" onkeyup="myFunction()" -->

  <script type="text/javascript">

    var wins = 0,
      losses = 0,
      guessed = [],
      currentWord = [],
      displayWordArray = [],
      displayWord = "",
      guessesAllowed = 10,
      wordIndex = 0, //I don't want to get the first word every time
      increment = 2,
      gameStatus = "",
      wrongGuesses = 0;
      wordList = ["BUDWEISER", "LEGEND", "CORONA", "MICHELOB", "MILLER", "CHEDDAR", "GOUDA", "PROVOLONE","ASIAGO","MUENSTER",
      "PEPPERONI","SAUSAGE", "ONION","BACON","JALAPENO,","MARGARITA","COSMOPOLITAN","MARTINI","DAIQUIRI","MUDSLIDE"];

    // Create variables that hold references to the places in the HTML where we want to display things.
    var directionsText = document.getElementById("directions-text");
    var userChoiceText = document.getElementById("userchoice-text");
    var currentWordText = document.getElementById("currentword-text");
    var guessedText = document.getElementById("guessed-text");
    var winsText = document.getElementById("wins-text");
    var lossesText = document.getElementById("losses-text");
    var gameStatusText = document.getElementById("gameStatus-text");


    //function will return true if a letter.
    function isLetter(charEntered) {
      return typeof charEntered === "string" && charEntered >= "A" && charEntered <= "Z";
    }

    //function will return true if letter has already been guessed.
    function alreadyGuessed(guessed, charEntered) {
      var retvalue = false;
      if (guessed.indexOf(charEntered) > -1) {
        retvalue = true;
      }
      else {
        retvalue = updateDisplayWord(guessed, guessed.length, charEntered);
        retvalue = false;
      }
      return retvalue;
    }

    //this will initial the display word array to _
    function wordToArray(currentWord) {
      var returnWord = [];
      for (var i = 0; i < currentWord.length; i++) {
        returnWord[i] = currentWord.substr(i, 1);
      }
      return returnWord;
    }

    //function will return true if the guessed letter is in the string.
    //it will also call the routine to update the array with the word.
    function letterInWord(currentWord, charEntered) {
      var isFound = false;
      var isTrue = true;
      var charPosition = 0;
      //need to loop through while the letter is in the word, may be in multiple times.
      while (isTrue) {
        charPosition = currentWord.indexOf(charEntered, charPosition);
        //console.log("letter in position: " + charPosition);
        //console.log("current word: " + currentWord);
        if (charPosition > -1) {
          isFound = true;
          var updated = updateDisplayWord(displayWordArray, charPosition, charEntered);
          //console.log("updated alist: " + currentWord);
          charPosition = charPosition + 1;
        }
        else {
          isTrue = false;
        }
      }
      return isFound;
    }

    //function will update the display word if correct
    function updateDisplayWord(alist, charPosition, charEntered) {
      alist[charPosition] = charEntered;
      //console.log("current word: " + alist);
      return true;
    }

    //function will convert array to display word if correct
    function getDisplayWord(alist) {
      var returnWord = "";
      for (var i = 0; i < alist.length; i++) {
        returnWord = returnWord + " " + alist[i];
      }
      return returnWord;
    }

    //function will get an array value for a word in the list.  Sequence is where to start in the array.
    //if sequence = 0 then get a random number within the array length
    function getWord(alist, sequence, increment) {
      if (sequence === 0) {
        return Math.floor(Math.random() * (alist.length-1));  //random starting number
      }
      if ((sequence + increment) > alist.length) {
        return increment;
      }
      else {
        return sequence + increment;
      }
    }

    // This function is run whenever the user presses a key
    document.onkeyup = function (event) {

      // Determines which key was pressed.

      var userGuess = event.key;
      userGuess = userGuess.toUpperCase();
      //console.log("Displaywordarray: " + displayWordArray+" "+displayWordArray.length);
      //if the current word is null, initilize everything
      //console.log("displaywordarray length: " + displayWordArray.length);
      if (displayWordArray.length < 1) {
        //get a word
        //console.log("Word Index: " + wordIndex);
        //console.log("Increment: " + increment);
        wordIndex = getWord(wordList,wordIndex, increment);
        //console.log("Word Index:2 " + wordIndex);
        wrongGuesses = 0;
        //console.log("Word Index: " + wordIndex);
        //console.log("array word: " + wordList[wordIndex]);
        currentWord = wordToArray(wordList[wordIndex]);
        //console.log("current word: " + currentWord);
        //initialize the word array
        displayWordArray = currentWord.slice();   //duplicate the word array
        //console.log("displaywordarray set: " + displayWordArray);
        displayWordArray.fill("_");   //replace all values with _
        //console.log("current word: 3 " + currentWord);
        //console.log("displaywordarray: " + displayWordArray);
        displayWord = getDisplayWord(displayWordArray); //convert array to word for displaying

        //console.log("displayword " + displayWord);
        
        gameStatus = "";
        //console.log("current word: 4 " + currentWord);
      }
      //this is where the process is
      //console.log("already guessed? " + (alreadyGuessed(guessed, userGuess)));
      else {
        if (!isLetter(userGuess)) {
          userGuess = "Guess a letter dummy";
        }
        else if (alreadyGuessed(guessed, userGuess)) {
          userGuess = "You've already guessed " + userGuess + ", try again!";
         // console.log("already guessed " + userGuess);
        }
        else if (letterInWord(currentWord, userGuess)) {
          //console.log("current word: " + currentWord);
          //console.log("they got one " + userGuess);
          displayWord = getDisplayWord(displayWordArray);
        }
        else {
          wrongGuesses++;
          //console.log("wrong guesses " + wrongGuesses);
        }
      }
      if (wrongGuesses >= guessesAllowed) {
        gameStatus = "You LOSE!";
        displayWordArray = [];
        guessed = [];
      }
      else if (!letterInWord(displayWordArray, '_')) {
        gameStatus = "You WIN!";
        displayWordArray = [];
        guessed = [];
      }

      //var computerGuess = getWord(wordList,0);
      ////initializeArray(currentWord);

      // Display the user and computer guesses, and wins/losses/ties.
      userChoiceText.textContent = "You chose: " + userGuess;
      currentWordText.textContent = "Word to Guess: " + displayWord;
      guessedText.textContent = "Letters Guessed: " + guessed;
      winsText.textContent = "wins: " + wins;
      lossesText.textContent = "losses: " + losses;
      gameStatusText.textContent = "Game Status: " + gameStatus;
    };
  </script>

</body>

</html>